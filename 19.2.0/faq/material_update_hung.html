<!DOCTYPE html>


<html>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Go unable to poll for changes | GoCD User Documentation</title>

<meta name="description" content="GoCD server polls for changes to all materials of &#39;Auto Triggered&#39; pipelines. Polling occurs every minute and ten materials at a time."/>
<meta name="keywords" content="[gocd server polls, build materials, polling intervals, pipelines, cd pipelines, schedule pipeline]"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="canonical" href="https://docs.gocd.org/current/faq/material_update_hung.html"/>
<script src="../javascripts/_gdpr-banner.js" type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<link rel="stylesheet" href="../normalize.min.css"/>
<link rel="stylesheet" href="../stylesheets/website.css"/>

<link rel="stylesheet" href="../book.min.f824f667a72dcf5aab167fc2e6191bac65989a53c5908bdabbd1e2d28ccf3a18.css"/>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-48357651-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav role="navigation">
<a href="https://www.gocd.org"> <img src="../svg/product_ui_logo_go.svg" class="icon" /></a>


    



<script>
    (function() {
        var menu = document.querySelector('aside.book-menu nav')
        addEventListener('beforeunload', function(event) {
            localStorage.setItem('menu.scrollTop', menu.scrollTop)
        });
    })();
    function loadFunction(){
        var menu = document.querySelector('aside.book-menu nav')
        var top = parseInt(localStorage.getItem('menu.scrollTop'));
        $(menu).animate({
            scrollTop: top
        }, 10)
    }
    $(document).ready = loadFunction();
</script>


<style>
  nav ul a[href$="\2f faq\2fmaterial_update_hung.html"] {
  color: #004ed0;
  }
</style>

<ul>
<li><a href="https://www.gocd.org/"><strong>Back to GoCD.org</strong></a></li>

<li><p><a href="https://github.com/gocd/docs.go.cd/"><strong>Contribute</strong></a></p>

<hr /></li>

<li><p><a href="../"><strong>Introduction</strong></a></p></li>

<li><p><a href="../introduction.html"><strong>Concepts In GoCD</strong></a></p>

<ul>
<li><a href="../introduction/concepts_in_go.html">Concepts In GoCD</a></li>
</ul></li>

<li><p><a href="../navigation.html"><strong>GoCD Tour</strong></a></p>

<ul>
<li><a href="../navigation/pipelines_dashboard_page.html">Pipeline Dashboard</a></li>
<li><a href="../navigation/agents_page.html">Agents</a></li>
<li><a href="../navigation/agent_details.html">Agent Details</a></li>
<li><a href="../navigation/pipeline_activity_page.html">Pipeline Activity</a></li>
<li><a href="../navigation/stage_details_page.html">Stage Details</a></li>
<li><a href="../navigation/job_details_page.html">Job Details</a></li>
<li><a href="../navigation/administration_page.html">Administration</a></li>
<li><a href="../navigation/server_details_page.html">Server Details</a></li>
<li><a href="../navigation/environments_page.html">Environments</a></li>
<li><a href="../navigation/value_stream_map.html">Value Stream Map</a></li>
</ul></li>

<li><p><a href="../installation.html"><strong>Installing GoCD</strong></a></p>

<ul>
<li><a href="../installation/system_requirements.html">System requirements</a></li>
<li><a href="../installation/installing_go_server.html">Installing GoCD Server</a>

<ul>
<li><a href="../installation/install/server/linux.html">Linux</a></li>
<li><a href="../installation/install/server/windows.html">Windows</a></li>
<li><a href="../installation/install/server/osx.html">Mac OS X</a></li>
<li><a href="../installation/install/server/zip.html">Generic Zip</a></li>
</ul></li>
<li><a href="../installation/installing_go_agent.html">Installing GoCD Agent</a>

<ul>
<li><a href="../installation/install/agent/linux.html">Linux</a></li>
<li><a href="../installation/install/agent/windows.html">Windows</a></li>
<li><a href="../installation/install/agent/osx.html">Mac OS X</a></li>
<li><a href="../installation/install/agent/zip.html">Generic Zip</a></li>
</ul></li>
<li><a href="../installation/upgrading_go.html">Upgrading GoCD</a></li>
<li><a href="../installation/configuring_server_details.html">Configuring Server Details</a></li>
<li><a href="../installation/configure-reverse-proxy.html">Configure a Reverse Proxy</a></li>
<li><a href="../installation/configure-agent-proxy.html">Configure an agent with proxy</a></li>
<li><a href="../installation/ssl_tls_config.html">Configuring SSL/TLS</a>

<ul>
<li><a href="../installation/ssl_tls/setting_up_ciphers.html">Customizing Ciphers</a></li>
<li><a href="../installation/ssl_tls/custom_server_certificate.html">Change SSL Certificates</a></li>
<li><a href="../installation/ssl_tls/end_to_end_transport_security.html">End to end transport security</a></li>
<li><a href="../installation/ssl_tls/configuring_hsts_header.html">Configuring HSTS Header</a></li>
</ul></li>
<li><a href="../installation/performance_tuning.html">Performance Tuning</a></li>
<li><a href="../installation/hardware_specifications.html">Hardware Specifications</a></li>
<li><a href="../installation/troubleshooting.html">Troubleshooting</a></li>
</ul></li>

<li><p><a href="../configuration.html"><strong>Configuration</strong></a></p>

<ul>
<li><a href="../configuration/quick_pipeline_setup.html">Setup a New Pipeline</a></li>
<li><a href="../configuration/managing_pipelines.html">Managing Pipelines</a></li>
<li><a href="../configuration/managing_dependencies.html">Managing Dependencies</a></li>
<li><a href="../configuration/managing_a_build_cloud.html">Managing Agents</a></li>
<li><a href="../configuration/managing_environments.html">Managing Environments</a></li>
<li><a href="../configuration/build_labelling.html">Pipeline Labelling</a></li>
<li><a href="../configuration/pipeline_scheduling.html">Pipeline Scheduling</a></li>
<li><a href="../configuration/admin_use_parameters_in_configuration.html">Parameterize a Pipeline</a></li>
<li><a href="../configuration/admin_use_custom_pipeline_label.html">Customize a Pipeline Label</a></li>
<li><a href="../configuration/admin_clone_pipeline.html">Clone a Pipeline</a></li>
<li><a href="../configuration/admin_lock_pipelines.html">Lock a Pipeline</a></li>
<li><a href="../configuration/admin_add_material.html">Add Material to Existing Pipeline</a></li>
<li><a href="../configuration/admin_add_stage.html">Add Stage to Existing Pipeline</a></li>
<li><a href="../configuration/admin_add_job.html">Add job to Existing Stage</a></li>
<li><a href="../configuration/admin_add_task.html">Add task to Existing Job</a></li>
<li><a href="../configuration/pipeline_templates.html">Pipeline Templates</a></li>
<li><a href="../configuration/elastic_agents.html">Elastic Agents</a></li>
<li><a href="../configuration/dev_choose_when_stage_runs.html">Choose When a Stage Runs</a></li>
<li><a href="../configuration/admin_timer.html">Timer Trigger</a></li>
<li><a href="../configuration/job_timeout.html">Job Timeout</a></li>
<li><a href="../configuration/managing_users.html">Managing Users</a></li>
<li><a href="../configuration/dev_authentication.html">Authentication</a></li>
<li><a href="../configuration/dev_authorization.html">Authorizing Users</a></li>
<li><a href="../configuration/delegating_group_administration.html">Delegating Group Administration</a></li>
<li><a href="../configuration/pipeline_group_admin_config.html">Pipeline Group Administration</a></li>
<li><a href="../configuration/dev_upload_test_report.html">Publish Reports and Artifacts</a></li>
<li><a href="../configuration/managing_artifacts_and_reports.html">Managing Artifacts and Reports</a></li>
<li><a href="../configuration/delete_artifacts.html">Auto Delete Artifacts</a></li>
<li><a href="../configuration/ui_testing.html">UI Testing</a></li>
<li><a href="../configuration/admin_mailhost_info.html">Mailhost Information</a></li>
<li><a href="../configuration/dev_notifications.html">Notifications</a></li>
<li><a href="../configuration/tfs_config.html">TFS Material configuration</a></li>
<li><a href="../configuration/configuration_reference.html">Reference</a></li>
<li><a href="../configuration/schema.html">Schema</a></li>
</ul></li>

<li><p><a href="../advanced_usage.html"><strong>Advanced Usage</strong></a></p>

<ul>
<li><a href="../advanced_usage/pipelines_as_code.html">Pipelines as code</a></li>
<li><a href="../advanced_usage/agent_auto_register.html">Auto Register a Remote Agent</a></li>
<li><a href="../advanced_usage/admin_spawn_multiple_jobs.html">Spawn multiple instances of a Job</a></li>
<li><a href="../advanced_usage/admin_install_multiple_agents.html">Multiple Agents on One Machine</a></li>
<li><a href="../advanced_usage/dev_clean_up_when_cancel.html">Clean on Task Cancel</a></li>
<li><a href="../advanced_usage/dev_conditional_task_execution.html">Conditional Task Execution</a></li>
<li><a href="../advanced_usage/trigger_with_options.html">Trigger With Options</a></li>
<li><a href="../advanced_usage/fan_in.html">Fan In</a></li>
<li><a href="../advanced_usage/properties.html">Properties</a></li>
<li><a href="../advanced_usage/logging.html">Logging</a></li>
<li><a href="../advanced_usage/compare_pipelines.html">Compare Builds</a></li>
<li><a href="../advanced_usage/stage_duration_chart.html">Graphs</a></li>
<li><a href="../advanced_usage/command_repository.html">Command Repository</a></li>
<li><a href="../advanced_usage/one_click_backup.html">Backup GoCD Server</a></li>
<li><a href="../advanced_usage/cron_backup.html">Timer Based GoCD Server Backup</a></li>
<li><a href="../advanced_usage/config_repo.html">Config Repository</a></li>
<li><a href="../advanced_usage/other_config_options.html">Other Config Options</a></li>
<li><a href="../advanced_usage/agent-health-check-api.html">Agent Health Check API</a></li>
<li><a href="../advanced_usage/maintenance_mode.html">Maintenance Mode</a><br /></li>
</ul></li>

<li><p><a href="../integration.html"><strong>Integrating GoCD With Other Tools</strong></a></p></li>

<li><p><a href="../extension_points.html"><strong>Extension Points Of GoCD</strong></a></p>

<ul>
<li><a href="../extension_points/plugin_user_guide.html">Plugin User Guide</a></li>
<li><a href="../extension_points/package_repository_extension.html">Package Repository Extension</a></li>
<li><a href="../extension_points/yum_repository_poller.html">Yum Repository Poller</a></li>
<li><a href="../extension_points/scm_extension.html">SCM Extension</a></li>
<li><a href="../extension_points/task_extension.html">Task Extension</a></li>
<li><a href="../extension_points/configrepo_extension.html">Configuration repository Extension</a></li>
</ul></li>

<li><p><a href="../gocd_on_kubernetes.html"><strong>GoCD on Kubernetes</strong></a></p>

<ul>
<li><a href="../gocd_on_kubernetes/introduction.html">Introduction</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/setup_and_configuration.html">Setup and configuration</a>

<ul>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/setup.html">Setup</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/configure_cluster.html">Configure your Kubernetes Cluster</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/helm_install.html">Install the GoCD Helm chart</a></li>
</ul></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline.html">Designing a CD Pipeline</a>

<ul>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/creating_a_build_pipeline.html">Create a pipeline to build application</a></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/creating_a_test_pipeline.html">Create a pipeline to test the built application</a></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/creating_a_deploy_pipeline.html">Create a pipeline to deploy on Kubernetes</a></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/docker_workflows.html">Docker workflows</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/configure_k8s_ea_plugin.html">Configure the Kubernetes Elastic Agent plugin</a></li>
</ul></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/troubleshooting.html">Troubleshooting</a></li>
</ul></li>

<li><p><a href="../faq.html"><strong>FAQ/Troubleshooting</strong></a></p>

<ul>
<li><a href="../faq/ordering_of_pipelines.html">Ordering of Pipelines</a></li>
<li><a href="../faq/stage_old_config.html">Historical Configuration</a></li>
<li><a href="../faq/concurrent_config_modifications.html">Concurrent Modifications to Config</a></li>
<li><a href="../faq/dev_understand_why_build_broken.html">Why the Build is Broken?</a></li>
<li><a href="../faq/dev_see_artifact_as_tab.html">See artifacts as sub-tabs</a></li>
<li><a href="../faq/dev_save_properties.html">Save Properties for a Build</a></li>
<li><a href="../faq/environment_variables.html">Using Environment variables</a></li>
<li><a href="../faq/rm_deploy_to_environment.html">Deploy to an environment</a></li>
<li><a href="../faq/tester_what_has_changed.html">See changes in new binary</a></li>
<li><a href="../faq/dependency_management.html">Run Tests against new Builds</a></li>
<li><a href="../faq/rm_what_is_deployed.html">Check What&rsquo;s Deployed</a></li>
<li><a href="../faq/deploy_a_specific_build_to_an_environment.html">Deploy a Specific Build</a></li>
<li><a href="../faq/agent_guid_issue.html">Clone/Copy an Existing Agents</a></li>
<li><a href="../faq/job_rerun.html">How do I re-run jobs?</a></li>
<li><a href="../faq/material_update_hung.html">Go unable to poll for changes</a></li>
<li><a href="../faq/artifact_integrity.html">Artifact integrity verification</a></li>
<li><a href="../faq/notifications_page.html">Email Notifications</a></li>
<li><a href="../faq/admin_out_of_disk_space.html">Running out of Disk Space</a></li>
<li><a href="../faq/docker_container_ssh_keys.html">Configure SSH Keys for dockerized GoCD</a></li>
</ul></li>

<li><p><a href="../beta.html"><strong>Beta features</strong></a></p>

<ul>
<li><a href="../beta/comment_on_pipeline_run.html">Comment on a pipeline run</a><br /></li>
</ul></li>

<li><p><a href="../release_history.html"><strong>Release History</strong></a></p>

<ul>
<li><a href="../release_history/whats_new_in_go.html">What&rsquo;s New in Go</a><br /></li>
</ul></li>
</ul>




</nav>
    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="../svg/menu.svg" />
  </label>
  <strong>Go unable to poll for changes</strong>
</header>

      
<article class="markdown">

<h1 id="gocd-unable-to-poll-for-changes">GoCD unable to poll for changes</h1>

<p>GoCD server polls for changes to all materials of &lsquo;Auto Triggered&rsquo; pipelines. By default, polling occurs every minute and ten materials at a time. The polling interval and the number of materials to be polled simultaneously are configurable.</p>

<p>GoCD uses SCM commands to poll for changes. For example, to check for any new changes in SVN repository the following command is used:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">svn log --non-interactive --xml -v -r HEAD:<span style="color:#b44">&#39;revision&#39;</span> <span style="color:#b44">&#39;repository-URL&#39;</span></code></pre></div>
<p>The SCM command used by GoCD server can hang with no output. Invalid configuration, network issues, console input block are some of the causes for such a situation. Such scenarios cause pipeline scheduling delays and also lead to performance degradation</p>

<p>Such a scenario is notified to the users by a warning in Server Health; when clicked shows a message similar to the one below.</p>

<p><img src="../images/material_update_hung.png" alt="" /></p>

<h2 id="what-can-i-do-with-the-information">What can I do with the information</h2>

<p>When you see warning messages like the one above</p>

<ul>
<li><p>Identify the processes running as children of GoCD Server</p>

<blockquote>
<p>On Windows, you can use tools like <strong>Process Explorer</strong> . On linux you could run &lsquo;ps waux | grep &lsquo;material-type&rdquo;</p>
</blockquote></li>

<li><p>Determine the process that&rsquo;s hung. The extra information like URL:&ldquo;<a href="https://test@bitbucket.org/test/git_repo.git&quot;">https://test@bitbucket.org/test/git_repo.git&quot;</a> in the warning information should help you with this.</p></li>

<li><p>On linux system, you should see lines like these:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">go <span style="color:#666">31201</span> <span style="color:#666">1</span>  <span style="color:#666">0</span> Feb07 ?  <span style="color:#666">00</span>:00:00 git clone https://test@bitbucket.org/test/git_repo.git /var/lib/cruise-server/pipelines/flyweight/b9ec0885-eb32-458c-bd6b-eeefe3ef9816</code></pre></div></li>

<li><p>Kill the process and all its children (the whole process tree).</p></li>

<li><p>Ensure that the warning message goes away from Server Health.</p>

<blockquote>
<p>Please note the folder name (of the form &hellip;/flyweight/b9ec0885-eb32-458c-bd6b-eeefe3ef9816 ) present in the OS process listing. This folder was being used by the polling command. Locate the folder in the GoCD installation and delete it if it exists. This ensures that the kill of the process tree has not left behind any inconsistent information.</p>
</blockquote></li>
</ul>

<h2 id="configuring-warning-time">Configuring warning time</h2>

<ul>
<li>GoCD server waits for 15 minutes (of no output) before it warns user about possible hung material update. User can modify this wait time using a System Property: &lsquo;material.update.inactive.timeout&rsquo;.</li>

<li><p>On linux installations of GoCD server, add the following line to /etc/default/go-server.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#a2f">export</span> <span style="color:#b8860b">GO_SERVER_SYSTEM_PROPERTIES</span><span style="color:#666">=</span><span style="color:#b44">&#39;-Dmaterial.update.inactive.timeout=20&#39;</span></code></pre></div>
<p>The above configuration sets the time that GoCD server uses to determine if a material update is possibly hung, to 20 minutes.</p></li>

<li><p>On Windows, add the following line in the <em><a href="../installation/installing_go_server.html">wrapper-properties.conf</a></em> file in the config folder of the GoCD server installation where <strong>x</strong> is 1 more than the highest number in <em>wrapper-server.conf</em> and <em>wrapper-properties.conf</em> combined.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wrapper.java.additional.x<span style="color:#666">=</span><span style="color:#b44">&#39;-Dmaterial.update.inactive.timeout=20&#39;</span></code></pre></div>
<p>The above configuration sets the time that GoCD server uses to determine if a material update is possibly hung, to 20 minutes.</p></li>
</ul>
</article>

      
<div class="align-center book-git-footer justify-end">
  
  
  <div>
    <a href="https://github.com/gocd/docs.go.cd/edit/master/content/faq/material_update_hung.md" target="_blank" rel="noopener">
      <img src="../svg/code-fork.svg" /> Edit this page
    </a>
  </div>
  
</div>


    </div>

    
  
  
  <aside class="book-toc fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#gocd-unable-to-poll-for-changes">GoCD unable to poll for changes</a>
<ul>
<li><a href="#what-can-i-do-with-the-information">What can I do with the information</a></li>
<li><a href="#configuring-warning-time">Configuring warning time</a></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-48357651-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</body>

</html>
